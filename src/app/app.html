<div class="container" *ngIf="showTestSelection">
  <h2>Select Test</h2>

  <button (click)="startTest(1)">Test 1</button>
  <button (click)="startTest(2)">Test 2</button>
  <button (click)="startTest(3)">Test 3</button>
  <button (click)="startTest(4)">Test 4</button>
</div>

<div class="container" *ngIf="!showTestSelection && !showResult">
  <!-- existing quiz UI -->
  <!-- QUESTION NUMBER NAVIGATION -->

  <h2>Question {{ questionNumberOffset + currentIndex + 1 }}</h2>

  <p class="question">
    {{ questions[currentIndex].question }}
  </p>

  <div class="answers">
    <label
      *ngFor="let answer of questions[currentIndex].answers"
      [class.correct]="
        questions[currentIndex].isChecked && answer === questions[currentIndex].correctAnswer
      "
      [class.wrong]="
        questions[currentIndex].isChecked &&
        answer === questions[currentIndex].selectedAnswer &&
        answer !== questions[currentIndex].correctAnswer
      "
    >
      <input
        type="radio"
        name="answer"
        [disabled]="questions[currentIndex].isChecked"
        [checked]="questions[currentIndex].selectedAnswer === answer"
        (change)="selectAnswer(answer)"
      />
      {{ answer }}
    </label>
  </div>
  <div class="nav-buttons">
    <!-- PREVIOUS -->
    <button class="prev-btn" [disabled]="currentIndex === 0" (click)="previousQuestion()">
      Previous
    </button>

    <!-- CHECK (OPTIONAL) -->
    <button
      class="check-btn"
      [disabled]="!questions[currentIndex].selectedAnswer || questions[currentIndex].isChecked"
      (click)="checkAnswer()"
    >
      Check Answer
    </button>

    <!-- NEXT / SKIP -->
    <button class="next-btn" (click)="nextQuestion()">
      {{ currentIndex === questions.length - 1 ? 'Finish' : 'Next / Skip' }}
    </button>
  </div>
  <p></p>

  <!-- TOGGLE BUTTON -->
  <button class="toggle-nav-btn" (click)="toggleQuestionNav()">
    {{ showQuestionNav ? 'Hide all questions' : 'Show all questions' }}
  </button>

  <!-- QUESTION NUMBER NAVIGATION -->
  <div class="question-nav" *ngIf="showQuestionNav">
    <button
      *ngFor="let q of questions; let i = index"
      (click)="goToQuestion(i); showQuestionNav = false"
      [class.active]="i === currentIndex"
      [class.answered]="q.selectedAnswer"
      [class.skipped]="!q.selectedAnswer && i < currentIndex"
    >
      {{ questionNumberOffset + i + 1 }}
    </button>
  </div>
</div>

<!-- RESULT -->
<div class="container" *ngIf="showResult">
  <h2>Result</h2>

  <h3>Score: {{ score }} / {{ questions.length }}</h3>

  <div *ngFor="let q of questions; let i = index" class="result-item">
    <p>
      <strong>Q{{ i + 1 }}:</strong> {{ q.question }}
    </p>
    <p>
      <strong>Your Answer:</strong>
      <span [class.correct]="q.isCorrect" [class.wrong]="!q.isCorrect">
        {{ q.selectedAnswer }}
      </span>
    </p>
    <p><strong>Correct Answer:</strong> {{ q.correctAnswer }}</p>
    <hr />
  </div>

  <button class="restart-btn" (click)="restartQuiz()">Restart Quiz</button>
</div>
